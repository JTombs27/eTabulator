"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7],{800:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(3645),l=o.n(n)()((function(e){return e[1]}));l.push([e.id,"#sidebar-wrapper{height:100%;margin-right:-250px;margin-top:-9px;overflow-y:auto;position:fixed;right:250px;transition:all .5s ease;width:auto;z-index:1000}",""]);const s=l},5007:(e,t,o)=>{o.r(t),o.d(t,{default:()=>pe});var n=o(821),l=(0,n.createElementVNode)("title",null,"Users",-1),s={class:"row gap-10 masonry pos-r"},r={class:"peers fxw-nw jc-sb ai-c"},c=(0,n.createElementVNode)("h3",null,"Users",-1),a={class:"peers"},i={class:"peer mR-10"},d={key:0,class:"peer"},m=(0,n.createTextVNode)("Add User"),u=(0,n.createElementVNode)("label",null,"Sample Inputs",-1),p=(0,n.createElementVNode)("input",{type:"text",class:"form-control"},null,-1),h={class:"col-12"},f={class:"table responsive bgc-white p-20 bd shadow-sm"},k={class:"table table-hover"},N=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",{scope:"col"},"Active"),(0,n.createElementVNode)("th",{scope:"col"},"Username"),(0,n.createElementVNode)("th",{scope:"col"},"Name"),(0,n.createElementVNode)("th",{scope:"col"},"Office"),(0,n.createElementVNode)("th",{scope:"col"},"Role"),(0,n.createElementVNode)("th",{scope:"col",style:{width:"30%"}},"Permissions"),(0,n.createElementVNode)("th",{scope:"col",style:{"text-align":"right"}},"Action")])],-1),v={class:"form-check form-switch"},E=["id","checked","onChange"],V=["for"],b={class:"row g-3 align-items-center"},g={class:"col-12 col-lg-auto text-center text-lg-start"},w={class:"notification-title mb-1"},x={class:"badge bg-info me-1"},y={style:{"text-align":"right"}},C={class:"dropdown dropstart"},B=(0,n.createElementVNode)("button",{class:"btn btn-secondary btn-sm action-btn",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-three-dots",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"})])],-1),P={class:"dropdown-menu action-dropdown","aria-labelledby":"dropdownMenuButton1"},S=(0,n.createTextVNode)("Edit"),M=["onClick"],D=(0,n.createElementVNode)("li",null,[(0,n.createElementVNode)("hr",{class:"dropdown-divider action-divider"})],-1),O={key:0},F=(0,n.createTextVNode)("Delete"),U={class:"row justify-content-center"},Z={class:"col-md-12"},L={class:"row pb-3"},A={class:"col-md-4"},T={class:"form-check"},R=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"flexCheckDefault"}," Select all ",-1),z={class:"col-md-4"},j={class:"form-check"},G=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"pgheadPermission"}," PG-Head ",-1),H={class:"col-md-4"},I={class:"form-check"},W=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"pgoPermission"}," PGO ",-1),q={class:"col-md-4"},J={class:"form-check"},K=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"roPermission"}," RO ",-1),Q={class:"col-md-4"},X={class:"form-check"},Y=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"pgsoPermission"}," PGSO ",-1),ee={class:"col-md-4"},te={class:"form-check"},oe=(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"gasoline-station"}," Gasoline Station ",-1),ne={class:"row"},le={class:"col-md-4 mb-3"},se={class:"form-check checkbox-list"},re=["value","id"],ce=["for"];var ae=o(7757),ie=o.n(ae),de=o(1175);function me(e,t,o,n,l,s,r){try{var c=e[s](r),a=c.value}catch(e){return void o(e)}c.done?t(a):Promise.resolve(a).then(n,l)}const ue={components:{Pagination:o(3532).Z,Filtering:de.Z},props:{users:Object,filters:Object,can:Object},data:function(){return{search:this.$props.filters.search,confirm:!1,filter:!1,showModal:!1,permissions:[],selectedPermissions:[],selectedUser:""}},watch:{search:_.debounce((function(e){this.$inertia.get("/users",{search:e},{preserveScroll:!0,preserveState:!0,replace:!0})}),300)},methods:{deleteUser:function(e){1==confirm("WARNING!\nAre you sure you want to delete the record?")&&this.$inertia.delete("/users/"+e)},showFilter:function(){this.filter=!this.filter},editPermissions:function(e){var t=this,o=_.find(this.users.data,{id:e});this.showModal=!0,this.selectedUser=e,this.selectedPermissions=[],_.forEach(o.permissions,(function(e){t.selectedPermissions.push(e.id)})),this.getAllPermissions()},updatePermissions:function(){this.$inertia.post("update-user-permissions",{user_id:this.selectedUser,permissions:this.selectedPermissions},{replace:!0}),$("#modal").hide(),$("body").removeClass("modal-open"),$("body").css("overflow","scroll"),$(".modal-backdrop").remove(),this.showModal=!1},closeModal:function(){this.showModal=!1},getAllPermissions:function(){var e,t=this;return(e=ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("get-all-permissions").then((function(e){t.permissions=_.groupBy(e.data,"permission_group")}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(n,l){var s=e.apply(t,o);function r(e){me(s,n,l,r,c,"next",e)}function c(e){me(s,n,l,r,c,"throw",e)}r(void 0)}))})()},setStatus:function(e,t){this.$inertia.patch("/users/status/".concat(t),{is_check:e.target.checked})},selectOption:function(e,t){if(console.log(t),e.target.checked)if("all"==t){var o=[];_.flatMapDepth(this.permissions,(function(e){_.forEach(e,(function(e){var t=_.map(e);o.push(t[0])}))}));this.selectedPermissions=o}else"pgo"==t?this.selectedPermissions=[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,23,24,25,26,31]:"ro"==t?this.selectedPermissions=[5,7,10,11,12,13,14,15,25]:"pghead"==t?this.selectedPermissions=[6,25,26,36]:"pgso"==t?this.selectedPermissions=[4,8,16,17,18,19,20,21,22,23,24,27,28,29,30,31,33,34,35]:"peo-motorpool"==t?this.selectedPermissions=[18,19]:"gasoline-station"==t&&(this.selectedPermissions=[20,21,22]);else this.selectedPermissions=[]}}};const pe=(0,o(3744).Z)(ue,[["render",function(e,t,o,_,$,ae){var ie=(0,n.resolveComponent)("Head"),de=(0,n.resolveComponent)("Link"),me=(0,n.resolveComponent)("filtering"),ue=(0,n.resolveComponent)("pagination"),pe=(0,n.resolveComponent)("Modal");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(ie,null,{default:(0,n.withCtx)((function(){return[l]})),_:1}),(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",r,[c,(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("div",i,[(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return $.search=e}),type:"text",class:"form-control form-control-sm",placeholder:"Search..."},null,512),[[n.vModelText,$.search]])]),o.can.createUser?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,[(0,n.createVNode)(de,{class:"btn btn-primary btn-sm",href:"/users/create"},{default:(0,n.withCtx)((function(){return[m]})),_:1}),(0,n.createElementVNode)("button",{class:"btn btn-primary btn-sm mL-2 text-white",onClick:t[1]||(t[1]=function(e){return ae.showFilter()})},"Filter")])):(0,n.createCommentVNode)("",!0)])]),$.filter?((0,n.openBlock)(),(0,n.createBlock)(me,{key:0,onCloseFilter:t[3]||(t[3]=function(e){return $.filter=!1})},{default:(0,n.withCtx)((function(){return[u,p,(0,n.createElementVNode)("button",{class:"btn btn-sm btn-primary mT-5 text-white",onClick:t[2]||(t[2]=function(){})},"Filter")]})),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("table",k,[N,(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.users.data,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:t},[(0,n.createElementVNode)("td",null,[(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("input",{type:"checkbox",class:"form-check-input",role:"switch",id:e.id,checked:e.is_active,onChange:function(t){return ae.setStatus(t,e.id)}},null,40,E),(0,n.createElementVNode)("label",{class:"form-check-label",for:e.id},null,8,V)])]),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.username),1),(0,n.createElementVNode)("td",null,[(0,n.createElementVNode)("div",b,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("p",w,(0,n.toDisplayString)(e.name),1)])])]),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.office),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.role),1),(0,n.createElementVNode)("td",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.permissions,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",x,(0,n.toDisplayString)(e.permission_name),1)})),256))]),(0,n.createElementVNode)("td",y,[(0,n.createElementVNode)("div",C,[B,(0,n.createElementVNode)("ul",P,[(0,n.createElementVNode)("li",null,[(0,n.createVNode)(de,{class:"dropdown-item",href:"/users/".concat(e.id,"/edit")},{default:(0,n.withCtx)((function(){return[S]})),_:2},1032,["href"])]),(0,n.createElementVNode)("li",null,[(0,n.createElementVNode)("a",{class:"dropdown-item",href:"#",onClick:function(t){return ae.editPermissions(e.id)}},"Permissions",8,M)]),D,o.can.canDeleteUser&&!e.can.delete?((0,n.openBlock)(),(0,n.createElementBlock)("li",O,[(0,n.createVNode)(de,{class:"text-danger dropdown-item",onClick:function(t){return ae.deleteUser(e.id)}},{default:(0,n.withCtx)((function(){return[F]})),_:2},1032,["onClick"])])):(0,n.createCommentVNode)("",!0)])])])])})),128))])]),(0,n.createElementVNode)("div",U,[(0,n.createElementVNode)("div",Z,[(0,n.createVNode)(ue,{next:o.users.next_page_url,prev:o.users.prev_page_url},null,8,["next","prev"])])])])])]),$.showModal?((0,n.openBlock)(),(0,n.createBlock)(pe,{key:0,modalTitle:"Permissions",addional_class:"modal-lg",showSaveButton:!0,onCloseModal:ae.closeModal,onSaveModal:ae.updatePermissions},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",L,[(0,n.createElementVNode)("div",A,[(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",onChange:t[4]||(t[4]=function(e){return ae.selectOption(e,"all")}),id:"flexCheckDefault"},null,32),R])]),(0,n.createElementVNode)("div",z,[(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",onChange:t[5]||(t[5]=function(e){return ae.selectOption(e,"pghead")}),id:"pgheadPermission"},null,32),G])]),(0,n.createElementVNode)("div",H,[(0,n.createElementVNode)("div",I,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",onChange:t[6]||(t[6]=function(e){return ae.selectOption(e,"pgo")}),id:"pgoPermission"},null,32),W])]),(0,n.createElementVNode)("div",q,[(0,n.createElementVNode)("div",J,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",name:"flexRadioDefault",onChange:t[7]||(t[7]=function(e){return ae.selectOption(e,"ro")}),id:"roPermission"},null,32),K])]),(0,n.createElementVNode)("div",Q,[(0,n.createElementVNode)("div",X,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",name:"flexRadioDefault",onChange:t[8]||(t[8]=function(e){return ae.selectOption(e,"pgso")}),id:"pgsoPermission"},null,32),Y])]),(0,n.createElementVNode)("div",ee,[(0,n.createElementVNode)("div",te,[(0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",name:"flexRadioDefault",onChange:t[9]||(t[9]=function(e){return ae.selectOption(e,"gasoline-station")}),id:"gasoline-station"},null,32),oe])])]),(0,n.createElementVNode)("div",ne,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)($.permissions,(function(e,o){return(0,n.openBlock)(),(0,n.createElementBlock)("div",le,[(0,n.createElementVNode)("h4",null,(0,n.toDisplayString)(o),1),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",se,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",class:"form-check-input specific","onUpdate:modelValue":t[10]||(t[10]=function(e){return $.selectedPermissions=e}),value:e.id,id:"permission".concat(e.id)},null,8,re),[[n.vModelCheckbox,$.selectedPermissions]]),(0,n.createElementVNode)("label",{class:"form-check-label disable-select",for:"permission".concat(e.id)},(0,n.toDisplayString)(e.permission_name),9,ce)])})),256))])})),256))])]})),_:1},8,["onCloseModal","onSaveModal"])):(0,n.createCommentVNode)("",!0)],64)}]])},1175:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(821),l={id:"sidebar-wrapper",class:"sidebar-nav nav navbar-inverse"},s={class:"row",style:{width:"380px"}},r={class:"bgc-white"},c={class:"modal-header"},a=(0,n.createElementVNode)("h5",{class:"modal-title",id:"exampleModalLiveLabel"},"Advanced Filtering",-1),i={class:"modal-body"};const d={};var m=o(3379),u=o.n(m),p=o(800),h={insert:"head",singleton:!1};u()(p.Z,h);p.Z.locals;const f=(0,o(3744).Z)(d,[["render",function(e,t,o,d,m,u){return(0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("div",c,[a,(0,n.createElementVNode)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeFilter")})})]),(0,n.createElementVNode)("div",i,[(0,n.renderSlot)(e.$slots,"default")])])])])}]])},3532:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(821),l={class:"pagination"},s={class:"page-item"},r=(0,n.createTextVNode)("Previous"),c={class:"page-item"},a=(0,n.createTextVNode)("Next");const i={props:{prev:String,next:String}};const d=(0,o(3744).Z)(i,[["render",function(e,t,o,i,d,m){var u=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("ul",l,[(0,n.createElementVNode)("li",s,[o.prev?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,class:"page-link",href:o.prev,"preserve-scroll":"","preserve-state":""},{default:(0,n.withCtx)((function(){return[r]})),_:1},8,["href"])):((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:1,class:(0,n.normalizeClass)(["page-link",{"text-muted":!o.prev}])},"Previous",2))]),(0,n.createElementVNode)("li",c,[o.next?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,class:"page-link",href:o.next,"preserve-scroll":"","preserve-state":""},{default:(0,n.withCtx)((function(){return[a]})),_:1},8,["href"])):((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:1,class:(0,n.normalizeClass)(["page-link",{"text-muted":!o.next}])},"Next",2))])])])}]])}}]);