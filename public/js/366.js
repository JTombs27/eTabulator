"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[366],{4366:(e,o,i)=>{i.r(o),i.d(o,{default:()=>h});var t=i(821),n={class:"mb-3"},s=(0,t.createElementVNode)("label",{for:"invoice",class:"form-label"},"Invoice #",-1),c={key:0,class:"fs-6 c-red-500"},a={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},r=(0,t.createElementVNode)("label",{for:"invoice",class:"form-label"},"Actual Liters",-1),l={key:0,class:"fs-6 c-red-500"},d={key:0,class:"ml-2"},v=[(0,t.createElementVNode)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),(0,t.createTextVNode)(" Submitting... ")];var m=i(1293),u=i(9038);const f={props:{item:{type:Object,default:function(){}}},components:{Modal:m.Z},data:function(){return{form:(0,u.cI)({invoice:null,actual_liter:null,id:null}),invoice_loader:!1,invoiceMessage:"",invoiceMessageClass:"",loader:!1,showInvoice:!1}},mounted:function(){this.form.id=this.item.id,this.form.actual_liter=this.item.actual_liters,this.invoice()},methods:{invoice:function(){this.invoiceMessageClass="",this.invoiceMessage="",this.item?(this.showInvoice=!0,this.form.id=this.item.id,this.form.invoice=this.item.invoice):(this.showInvoice=!1,this.form.id=null,this.form.invoice=null,this.$emit("closeModal"))},checkInvoice:function(){this.form.clearErrors(),this.invoice_loader=!0,this.invoiceMessage="Checking invoice number",this.invoiceMessageClass="",this.validateInvoice()},validateInvoice:_.debounce((function(){var e=this;axios.post("/travels/checkInvoice",{id:this.form.id,invoice_no:this.form.invoice}).then((function(o){e.form.invoice?o.data?(e.invoiceMessage="Valid",e.invoiceMessageClass="text-success"):(e.invoiceMessage="Invoice # already exist",e.invoiceMessageClass="text-danger"):(e.invoiceMessage="",e.invoiceMessageClass=""),e.invoice_loader=!1}))}),500),saveInvoice:function(){var e=this;this.form.post("/travels/updateInvoice",{onStart:function(){e.invoiceMessageClass=""},onSuccess:function(o){e.showInvoice=!1,$("#modal").hide(),$("body").removeClass("modal-open"),$("body").css("overflow","scroll"),$(".modal-backdrop").remove(),e.$emit("closeModal","save")},onFinish:function(o){e.invoice_loader=!1}})}}};const h=(0,i(3744).Z)(f,[["render",function(e,o,i,m,u,f){var h=(0,t.resolveComponent)("Modal");return u.showInvoice?((0,t.openBlock)(),(0,t.createBlock)(h,{key:0,onCloseModal:o[4]||(o[4]=function(e){return f.invoice()}),showSaveButton:!0,onSaveModal:o[5]||(o[5]=function(e){return f.saveInvoice()}),modalTitle:"Invoice"},{default:(0,t.withCtx)((function(){return[(0,t.createElementVNode)("form",{onSubmit:o[3]||(o[3]=(0,t.withModifiers)((function(e){return f.saveInvoice()}),["prevent"]))},[(0,t.createElementVNode)("div",n,[s,(0,t.withDirectives)((0,t.createElementVNode)("input",{type:"text",class:"form-control",id:"invoice",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=function(e){return u.form.invoice=e}),onKeyup:o[1]||(o[1]=function(e){return f.checkInvoice()})},null,544),[[t.vModelText,u.form.invoice]]),u.form.errors.invoice?((0,t.openBlock)(),(0,t.createElementBlock)("div",c,(0,t.toDisplayString)(u.form.errors.invoice),1)):(0,t.createCommentVNode)("",!0),(0,t.createElementVNode)("span",null,[u.invoice_loader?((0,t.openBlock)(),(0,t.createElementBlock)("span",a)):(0,t.createCommentVNode)("",!0),(0,t.createElementVNode)("span",{class:(0,t.normalizeClass)(["ml-2",u.invoiceMessageClass])},(0,t.toDisplayString)(u.invoiceMessage),3)])]),(0,t.createElementVNode)("div",null,[r,(0,t.withDirectives)((0,t.createElementVNode)("input",{type:"text",class:"form-control",id:"actual",autocomplete:"off","onUpdate:modelValue":o[2]||(o[2]=function(e){return u.form.actual_liter=e})},null,512),[[t.vModelText,u.form.actual_liter]]),u.form.errors.actual_liter?((0,t.openBlock)(),(0,t.createElementBlock)("div",l,(0,t.toDisplayString)(u.form.errors.actual_liter),1)):(0,t.createCommentVNode)("",!0)]),u.form.processing?((0,t.openBlock)(),(0,t.createElementBlock)("span",d,v)):(0,t.createCommentVNode)("",!0)],32)]})),_:1})):(0,t.createCommentVNode)("",!0)}]])}}]);