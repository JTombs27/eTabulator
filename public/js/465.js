"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{465:(e,t,r)=>{r.r(t),r.d(t,{default:()=>le});var o=r(821),l={class:"row gap-20 masonry pos-r"},a={class:"peers fxw-nw jc-sb ai-c"},i=(0,o.createTextVNode)("Total Charges: "),c=(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,o.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,o.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1),n={class:"col-md-8"},s={class:"row"},d=(0,o.createElementVNode)("label",{for:""},"From",-1),m={key:0,class:"fs-6 c-red-500"},u={key:0,class:"col-md-6"},f=(0,o.createElementVNode)("label",{for:""},"To",-1),p={key:0,class:"fs-6 c-red-500"},v={class:"col-md-12"},h=(0,o.createElementVNode)("br",null,null,-1),_={class:"form-check"},V=(0,o.createElementVNode)("label",{class:"form-check-label disable-select",for:"flexCheckDefault"}," Check ranged date ",-1),g=(0,o.createElementVNode)("hr",null,null,-1),D={class:"row"},N={class:"col-md-6"},E=(0,o.createElementVNode)("label",{for:""},"Travel Departure",-1),k={class:"col-md-6"},y=(0,o.createElementVNode)("label",{for:""},"Travel Arrival",-1),x=(0,o.createElementVNode)("label",{for:""},"Vehicle Name",-1),b={key:0,class:"fs-6 c-red-500"},w={class:"col-md-12"},B=(0,o.createElementVNode)("br",null,null,-1),C={class:"form-check"},T=(0,o.createElementVNode)("label",{class:"form-check-label disable-select",for:"carpool"}," Tag as carpool ",-1),S=(0,o.createElementVNode)("hr",null,null,-1),A=(0,o.createElementVNode)("label",null,"Authorized Driver",-1),M={key:1,class:"fs-6 c-red-500"},U=(0,o.createElementVNode)("br",null,null,-1),P={class:"col-md-12"},G={class:"form-check"},F=(0,o.createElementVNode)("label",{class:"form-check-label disable-select",for:"actualDriverBox",id:"labelActual"}," Check to set substitute driver ",-1),j={key:2},O={key:4,class:"fs-6 c-red-500"},L=(0,o.createElementVNode)("hr",null,null,-1),z=(0,o.createElementVNode)("label",{for:""},"Name of Authorized Passenger/s",-1),R=(0,o.createElementVNode)("label",{for:""},"Place to visit",-1),Z=(0,o.createElementVNode)("label",{for:""},"Purpose of Travel",-1),I=(0,o.createElementVNode)("label",{for:""},"Gas Type",-1),H=["value"],K={key:5,class:"fs-6 c-red-500"},q=(0,o.createElementVNode)("label",{for:""},"Liter/s",-1),J={key:6,class:"fs-6 c-red-500"},Q=(0,o.createElementVNode)("label",{for:""},"Price",-1),W={key:7,class:"fs-6 c-red-500"},X=["disabled"];var Y=r(7757),ee=r.n(Y),te=r(9038);function re(e,t,r,o,l,a,i){try{var c=e[a](i),n=c.value}catch(e){return void r(e)}c.done?t(n):Promise.resolve(n).then(o,l)}const oe={props:{editData:Object,charges:String},data:function(){return{vehicles:[],driverName:"",form:(0,te.cI)({place_to_visit:"",gas_type:"",time_arrival:"",time_departure:"",total_liters:null,official_passenger:"",driver_vehicles_id:null,actual_driver:"",date_from:"",date_to:"",rangedDate:null,price:0,showActualDriver:!1,vehicles_id:null,purpose:"",drivers_id:null,is_carpool:null,actual_driver_id:null,charges:null}),pageTitle:"Create",columnFrom:"col-md-12",employees:[],drivers:[],gases:[{id:"Gasoline(Regular)",text:"Gasoline(Regular)"},{id:"Gasoline(Premium)",text:"Gasoline(Premium)"},{id:"Diesoline",text:"Diesoline"},{id:"Engine Oil",text:"Engine Oil"},{id:"Brake Oil",text:"Brake Oil"},{id:"Greases",text:"Greases"}]}},mounted:function(){var e,t=this;return(e=ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.charges=t.charges,void 0===t.editData){e.next=27;break}return t.loading=!0,t.pageTitle="Edit",t.form.place_to_visit=t.editData.place_to_visit,t.form.gas_type=t.editData.gas_type,t.form.time_arrival=t.editData.time_arrival,t.form.time_departure=t.editData.time_departure,t.form.total_liters=t.editData.total_liters,t.form.vehicles_id=String(t.editData.driver_vehicle.vehicles_id),t.form.driver_vehicles_id=t.editData.driver_vehicle.id,t.form.purpose=t.editData.purpose,t.form.price=t.editData.price,t.form.drivers_id=t.editData.driver_vehicle.drivers_id,t.form.date_from=t.editData.date_from,t.form.date_to=t.editData.date_to,t.form.office_id=t.editData.office_id,t.form.is_carpool=Boolean(t.editData.is_carpool),t.form.showActualDriver=!!t.editData.actual_driver,t.form.actual_driver=t.editData.actual_driver,t.editData.date_to&&(t.form.rangedDate=!0),e.next=23,t.getVehicleDetails();case 23:return e.next=25,t.showActualDriver();case 25:e.next=28;break;case 27:t.pageTitle="Create";case 28:t.getVehicles();case 29:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(o,l){var a=e.apply(t,r);function i(e){re(a,o,l,i,c,"next",e)}function c(e){re(a,o,l,i,c,"throw",e)}i(void 0)}))})()},methods:{fetchPrice:function(){var e=this;axios.post("/travels/get-price",{datefilter:this.form.date_from,gasType:this.form.gas_type}).then((function(t){console.log(t.data.price),e.form.price=Number(t.data.price)*Number(e.form.total_liters)}))},getVehicles:function(){var e=this;axios.get("/vehicles/getVehicles/".concat(this.form.vehicles_id)).then((function(t){e.vehicles=t.data}))},getEmployees:function(){var e=this;axios.get("/employees/getEmployees").then((function(t){e.employees=t.data}))},getVehicleDetails:function(){var e=this;axios.post("/travels/vehicle-details",{vehicles_id:this.form.vehicles_id}).then((function(t){e.drivers=t.data.map((function(t){var r=!1;null!=e.editData&&(r=t.empl.empl_id===e.editData.driver_vehicle.drivers_id);var o="";return t.empl.middle_name&&(o=t.empl.middle_name.charAt(0)),{id:t.empl.empl_id,text:"".concat(t.empl.first_name," ").concat(o,". ").concat(t.empl.last_name),dv_id:t.id,office_id:t.empl.department_code,selected:r}}))}))},showActualDriver:function(e){$("#actualDriver").select2({ajax:{type:"GET",dataType:"json",url:"/employees/getEmployees",delay:400,data:function(e){return{search:e.term}},processResults:function(e,t){return t.page=t.page||1,{results:$.map(e,(function(e){return{id:e.text,text:e.text,cats:e.cats}}))}},cache:!0},data:[{text:this.form.actual_driver,id:this.form.actual_driver,selected:!0}],placeholder:"Search to add actual driver",minimumInputLength:3})},setActualDriver:function(e){console.log(e)},setDriverVehicle:function(e){this.form.driver_vehicles_id=e.dv_id,void 0===this.editData&&(this.form.office_id=e.office_id)},submit:function(){if(this.editData)return this.form.patch("/travels/".concat(this.editData.id),this.form),!1;this.form.post("/travels",this.form)}},watch:{"form.rangedDate":function(e){var t=this;e?this.columnFrom="col-md-6":setTimeout((function(){t.columnFrom="col-md-12"}),100)},form:{handler:function(e){console.log("test")}}}};const le=(0,r(3744).Z)(oe,[["render",function(e,t,r,$,Y,ee){var te=(0,o.resolveComponent)("Head"),re=(0,o.resolveComponent)("Link"),oe=(0,o.resolveComponent)("Select2");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(te,null,{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("title",null,(0,o.toDisplayString)(Y.pageTitle)+" travel",1)]})),_:1}),(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",a,[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(Y.pageTitle)+" Travel",1),(0,o.createElementVNode)("h3",null,[i,(0,o.createElementVNode)("u",null,(0,o.toDisplayString)(r.charges),1)]),(0,o.createVNode)(re,{href:"/travels"},{default:(0,o.withCtx)((function(){return[c]})),_:1})]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("form",{onSubmit:t[23]||(t[23]=(0,o.withModifiers)((function(e){return ee.submit()}),["prevent"]))},[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)([Y.columnFrom])},[d,(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return Y.form.date_from=e}),type:"date",class:"form-control",autocomplete:"chrome-off"},null,512),[[o.vModelText,Y.form.date_from]]),Y.form.errors.date_from?((0,o.openBlock)(),(0,o.createElementBlock)("div",m,(0,o.toDisplayString)(Y.form.errors.date_from),1)):(0,o.createCommentVNode)("",!0)],2),(0,o.createVNode)(o.Transition,{name:"fade",mode:"out-in"},{default:(0,o.withCtx)((function(){return[Y.form.rangedDate?((0,o.openBlock)(),(0,o.createElementBlock)("div",u,[f,(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return Y.form.date_to=e}),type:"date",class:"form-control",autocomplete:"chrome-off"},null,512),[[o.vModelText,Y.form.date_to]]),Y.form.errors.date_to?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,(0,o.toDisplayString)(Y.form.errors.date_to),1)):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)]})),_:1}),(0,o.createElementVNode)("div",v,[h,(0,o.createElementVNode)("div",_,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[2]||(t[2]=function(e){return Y.form.rangedDate=e})},null,512),[[o.vModelCheckbox,Y.form.rangedDate]]),V])])]),g,(0,o.createElementVNode)("div",D,[(0,o.createElementVNode)("div",N,[E,(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return Y.form.time_departure=e}),type:"time",class:"form-control",autocomplete:"chrome-off"},null,512),[[o.vModelText,Y.form.time_departure]])]),(0,o.createElementVNode)("div",k,[y,(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return Y.form.time_arrival=e}),type:"time",class:"form-control",autocomplete:"chrome-off"},null,512),[[o.vModelText,Y.form.time_arrival]])])]),x,(0,o.createVNode)(oe,{modelValue:Y.form.vehicles_id,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Y.form.vehicles_id=e}),options:Y.vehicles,onSelect:t[6]||(t[6]=function(e){return ee.getVehicleDetails()})},null,8,["modelValue","options"]),Y.form.errors.vehicles_id?((0,o.openBlock)(),(0,o.createElementBlock)("div",b,(0,o.toDisplayString)(Y.form.errors.vehicles_id),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",w,[B,(0,o.createElementVNode)("div",C,[T,(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"ml-5 form-check-input",type:"checkbox",value:"",id:"carpool","onUpdate:modelValue":t[7]||(t[7]=function(e){return Y.form.is_carpool=e})},null,512),[[o.vModelCheckbox,Y.form.is_carpool]])])]),S,A,(0,o.createVNode)(oe,{class:"js-data-example-ajax",modelValue:Y.form.drivers_id,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Y.form.drivers_id=e}),options:Y.drivers,onSelect:t[9]||(t[9]=function(e){return ee.setDriverVehicle(e)})},null,8,["modelValue","options"]),Y.form.errors.driver_vehicles_id?((0,o.openBlock)(),(0,o.createElementBlock)("div",M,(0,o.toDisplayString)(Y.form.errors.driver_vehicles_id),1)):(0,o.createCommentVNode)("",!0),U,(0,o.createElementVNode)("div",P,[(0,o.createElementVNode)("div",G,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-check-input",type:"checkbox",value:"",id:"actualDriverBox","onUpdate:modelValue":t[10]||(t[10]=function(e){return Y.form.showActualDriver=e}),onChange:t[11]||(t[11]=function(e){return ee.showActualDriver(e)})},null,544),[[o.vModelCheckbox,Y.form.showActualDriver]]),F])]),Y.form.showActualDriver?((0,o.openBlock)(),(0,o.createElementBlock)("label",j,"Actual Driver")):(0,o.createCommentVNode)("",!0),Y.form.showActualDriver?((0,o.openBlock)(),(0,o.createBlock)(oe,{key:3,modelValue:Y.form.actual_driver,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Y.form.actual_driver=e}),id:"actualDriver",onSelect:t[13]||(t[13]=function(e){return ee.setActualDriver(e)})},null,8,["modelValue"])):(0,o.createCommentVNode)("",!0),Y.form.errors.actual_driver?((0,o.openBlock)(),(0,o.createElementBlock)("div",O,(0,o.toDisplayString)(Y.form.errors.actual_driver),1)):(0,o.createCommentVNode)("",!0),L,z,(0,o.withDirectives)((0,o.createElementVNode)("textarea",{class:"form-control",cols:"3","onUpdate:modelValue":t[14]||(t[14]=function(e){return Y.form.official_passenger=e})},null,512),[[o.vModelText,Y.form.official_passenger]]),R,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=function(e){return Y.form.place_to_visit=e}),class:"form-control"},null,512),[[o.vModelText,Y.form.place_to_visit]]),Z,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=function(e){return Y.form.purpose=e}),class:"form-control"},null,512),[[o.vModelText,Y.form.purpose]]),I,(0,o.withDirectives)((0,o.createElementVNode)("select",{class:"form-select","onUpdate:modelValue":t[17]||(t[17]=function(e){return Y.form.gas_type=e}),onChange:t[18]||(t[18]=function(e){return ee.fetchPrice()})},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(Y.gases,(function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e.id},(0,o.toDisplayString)(e.text),9,H)})),256))],544),[[o.vModelSelect,Y.form.gas_type]]),Y.form.errors.gas_type?((0,o.openBlock)(),(0,o.createElementBlock)("div",K,(0,o.toDisplayString)(Y.form.errors.gas_type),1)):(0,o.createCommentVNode)("",!0),q,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=function(e){return Y.form.total_liters=e}),class:"form-control",onKeyup:t[20]||(t[20]=function(e){return ee.fetchPrice()})},null,544),[[o.vModelText,Y.form.total_liters]]),Y.form.errors.total_liters?((0,o.openBlock)(),(0,o.createElementBlock)("div",J,(0,o.toDisplayString)(Y.form.errors.total_liters),1)):(0,o.createCommentVNode)("",!0),Q,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[21]||(t[21]=function(e){return Y.form.price=e}),class:"form-control"},null,512),[[o.vModelText,Y.form.price]]),Y.form.errors.price?((0,o.openBlock)(),(0,o.createElementBlock)("div",W,(0,o.toDisplayString)(Y.form.errors.price),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("button",{type:"button",class:"btn btn-primary mt-3",onClick:t[22]||(t[22]=function(e){return ee.submit()}),disabled:Y.form.processing},"Save changes",8,X)],32)])])],64)}]])}}]);