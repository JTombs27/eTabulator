"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[49],{4049:(e,o,t)=>{t.r(o),t.d(o,{default:()=>g});var i=t(821),n={class:"mb-3"},s=(0,i.createElementVNode)("label",{for:"invoice",class:"form-label"},"Invoice #",-1),r={key:0,class:"fs-6 c-red-500"},a={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},c=(0,i.createElementVNode)("label",{for:"invoice",class:"form-label"},"Actual Liters",-1),l={key:0,class:"fs-6 c-red-500"},d={key:0},m=(0,i.createElementVNode)("label",{for:"invoice",class:"form-label"},"Date Fueled",-1),u={key:0,class:"fs-6 c-red-500"},v={key:1,class:"ml-2"},f=[(0,i.createElementVNode)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),(0,i.createTextVNode)(" Submitting... ")];var h=t(1293),p=t(9038);const k={props:{item:{type:Object,default:function(){}}},components:{Modal:h.Z},data:function(){return{form:(0,p.cI)({invoice:null,actual_liter:null,id:null,date_fueled:null}),invoice_loader:!1,invoiceMessage:"",invoiceMessageClass:"",loader:!1,showInvoice:!1}},mounted:function(){this.form.id=this.item.id,this.form.actual_liter=this.item.actual_liters,this.form.date_fueled=this.item.date_fueled,this.invoice()},methods:{invoice:function(){this.invoiceMessageClass="",this.invoiceMessage="",this.item?(this.showInvoice=!0,this.form.id=this.item.id,this.form.invoice=this.item.invoice):(this.showInvoice=!1,this.form.id=null,this.form.invoice=null,this.$emit("closeModal"))},checkInvoice:function(){this.form.clearErrors(),this.invoice_loader=!0,this.invoiceMessage="Checking invoice number",this.invoiceMessageClass="",this.validateInvoice()},validateInvoice:_.debounce((function(){var e=this;axios.post("/travels/checkInvoice",{id:this.form.id,invoice_no:this.form.invoice}).then((function(o){e.form.invoice?o.data?(e.invoiceMessage="Valid",e.invoiceMessageClass="text-success"):(e.invoiceMessage="Invoice # already exist",e.invoiceMessageClass="text-danger"):(e.invoiceMessage="",e.invoiceMessageClass=""),e.invoice_loader=!1}))}),500),saveInvoice:function(){var e=this;this.form.post("/travels/updateInvoice",{onStart:function(){e.invoiceMessageClass=""},onSuccess:function(o){e.showInvoice=!1,$("#modal").hide(),$("body").removeClass("modal-open"),$("body").css("overflow","scroll"),$(".modal-backdrop").remove(),e.$emit("closeModal","save")},onFinish:function(o){e.invoice_loader=!1}})}},computed:{}};const g=(0,t(3744).Z)(k,[["render",function(e,o,t,h,p,k){var g=(0,i.resolveComponent)("Modal");return p.showInvoice?((0,i.openBlock)(),(0,i.createBlock)(g,{key:0,onCloseModal:o[5]||(o[5]=function(e){return k.invoice()}),showSaveButton:!0,onSaveModal:o[6]||(o[6]=function(e){return k.saveInvoice()}),modalTitle:"Invoice"},{default:(0,i.withCtx)((function(){return[(0,i.createElementVNode)("form",{onSubmit:o[4]||(o[4]=(0,i.withModifiers)((function(e){return k.saveInvoice()}),["prevent"]))},[(0,i.createElementVNode)("div",n,[s,(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"text",class:"form-control",id:"invoice",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=function(e){return p.form.invoice=e}),onKeyup:o[1]||(o[1]=function(e){return k.checkInvoice()})},null,544),[[i.vModelText,p.form.invoice]]),p.form.errors.invoice?((0,i.openBlock)(),(0,i.createElementBlock)("div",r,(0,i.toDisplayString)(p.form.errors.invoice),1)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("span",null,[p.invoice_loader?((0,i.openBlock)(),(0,i.createElementBlock)("span",a)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("span",{class:(0,i.normalizeClass)(["ml-2",p.invoiceMessageClass])},(0,i.toDisplayString)(p.invoiceMessage),3)])]),(0,i.createElementVNode)("div",null,[c,(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"text",class:"form-control",id:"actual",autocomplete:"off","onUpdate:modelValue":o[2]||(o[2]=function(e){return p.form.actual_liter=e})},null,512),[[i.vModelText,p.form.actual_liter]]),p.form.errors.actual_liter?((0,i.openBlock)(),(0,i.createElementBlock)("div",l,(0,i.toDisplayString)(p.form.errors.actual_liter),1)):(0,i.createCommentVNode)("",!0)]),"gasoline-station"==e.$page.props.auth.user.role||"Admin"==e.$page.props.auth.user.role?((0,i.openBlock)(),(0,i.createElementBlock)("div",d,[m,(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"date",class:"form-control",id:"date_fueled",autocomplete:"off","onUpdate:modelValue":o[3]||(o[3]=function(e){return p.form.date_fueled=e})},null,512),[[i.vModelText,p.form.date_fueled]]),p.form.errors.date_fueled?((0,i.openBlock)(),(0,i.createElementBlock)("div",u,(0,i.toDisplayString)(p.form.errors.date_fueled),1)):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0),p.form.processing?((0,i.openBlock)(),(0,i.createElementBlock)("span",v,f)):(0,i.createCommentVNode)("",!0)],32)]})),_:1})):(0,i.createCommentVNode)("",!0)}]])}}]);