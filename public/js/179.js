"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[179],{179:(e,o,i)=>{i.r(o),i.d(o,{default:()=>u});var t=i(821),n={class:"mb-3"},s=(0,t.createElementVNode)("label",{for:"invoice",class:"form-label"},"Invoice #",-1),c={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},a=(0,t.createElementVNode)("label",{for:"invoice",class:"form-label"},"Actual Liters",-1),l={key:0,class:"fs-6 c-red-500"};var r=i(1293),v=i(9038);const d={props:{item:{type:Object,default:function(){}}},components:{Modal:r.Z},data:function(){return{form:(0,v.cI)({invoice:null,actual_liter:null,id:null}),invoice_loader:!1,invoiceMessage:"",invoiceMessageClass:"",loader:!1,showInvoice:!1}},mounted:function(){this.form.id=this.item.id,this.form.actual_liter=this.item.actual_liters,this.invoice()},methods:{invoice:function(){console.log(this.item),this.invoiceMessageClass="",this.invoiceMessage="",this.item?(this.showInvoice=!0,this.form.id=this.item.id,this.form.invoice=this.item.invoice):(this.showInvoice=!1,this.form.id=null,this.form.invoice=null,this.$emit("closeModal"))},checkInvoice:function(){this.invoice_loader=!0,this.invoiceMessage="Checking invoice number",this.invoiceMessageClass="",this.validateInvoice()},validateInvoice:_.debounce((function(){var e=this;axios.post("/travels/checkInvoice",{id:this.form.id,invoice_no:this.form.invoice}).then((function(o){e.form.invoice?o.data?(e.invoiceMessage="Valid",e.invoiceMessageClass="text-success"):(e.invoiceMessage="Invoice # already exist",e.invoiceMessageClass="text-danger"):(e.invoiceMessage="",e.invoiceMessageClass=""),e.invoice_loader=!1}))}),500),saveInvoice:function(){var e=this;this.$inertia.post("/travels/updateInvoice",this.form,{onStart:function(){e.invoice_loader=!0,e.invoiceMessageClass="",e.invoiceMessage="Submitting..."},onSuccess:function(o){e.showInvoice=!1,$("#modal").hide(),$("body").removeClass("modal-open"),$("body").css("overflow","scroll"),$(".modal-backdrop").remove(),e.$emit("closeModal","save")},onError:function(o){e.invoice_loader=!1,e.invoiceMessage=o.invoice,e.invoiceMessageClass="text-danger"}})}}};const u=(0,i(3744).Z)(d,[["render",function(e,o,i,r,v,d){var u=(0,t.resolveComponent)("Modal");return v.showInvoice?((0,t.openBlock)(),(0,t.createBlock)(u,{key:0,onCloseModal:o[4]||(o[4]=function(e){return d.invoice()}),showSaveButton:!0,onSaveModal:o[5]||(o[5]=function(e){return d.saveInvoice()}),modalTitle:"Invoice"},{default:(0,t.withCtx)((function(){return[(0,t.createElementVNode)("form",{onSubmit:o[3]||(o[3]=(0,t.withModifiers)((function(e){return d.saveInvoice()}),["prevent"]))},[(0,t.createElementVNode)("div",n,[s,(0,t.withDirectives)((0,t.createElementVNode)("input",{type:"text",class:"form-control",id:"invoice",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=function(e){return v.form.invoice=e}),onKeyup:o[1]||(o[1]=function(e){return d.checkInvoice()})},null,544),[[t.vModelText,v.form.invoice]]),(0,t.createElementVNode)("span",null,[v.invoice_loader?((0,t.openBlock)(),(0,t.createElementBlock)("span",c)):(0,t.createCommentVNode)("",!0),(0,t.createElementVNode)("span",{class:(0,t.normalizeClass)(["ml-2",v.invoiceMessageClass])},(0,t.toDisplayString)(v.invoiceMessage),3)]),a,(0,t.withDirectives)((0,t.createElementVNode)("input",{type:"text",class:"form-control",id:"actual",autocomplete:"off","onUpdate:modelValue":o[2]||(o[2]=function(e){return v.form.actual_liter=e})},null,512),[[t.vModelText,v.form.actual_liter]]),v.form.errors.actual_liter?((0,t.openBlock)(),(0,t.createElementBlock)("div",l,(0,t.toDisplayString)(v.form.errors.actual_liter),1)):(0,t.createCommentVNode)("",!0)])],32)]})),_:1})):(0,t.createCommentVNode)("",!0)}]])}}]);